<html
        xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
        xmlns:core="http://typo3.org/ns/TYPO3/CMS/Core/ViewHelpers"
        data-namespace-typo3-fluid="true"
>

<f:layout name="Module" />

<f:section name="Before">
    <f:be.pageRenderer
            includeJavaScriptModules="{
            0: '@typo3/backend/recordlist.js',
            1: '@typo3/backend/record-download-button.js',
            2: '@typo3/backend/clear-cache.js',
            3: '@typo3/backend/record-search.js',
            4: '@typo3/backend/ajax-data-handler.js',
            5: '@typo3/backend/column-selector-button.js',
            6: '@typo3/backend/multi-record-selection.js',
            7: '@typo3/backend/clipboard-panel.js',
            8: '@typo3/backend/new-content-element-wizard-button.js',
            9: '@typo3/backend/element/immediate-action-element.js',
            10: '@typo3/backend/context-menu.js',
            11: '@typo3/backend/element/editable-page-title.js'
        }"
            addJsInlineLabels="{
            'editablePageTitle.input.field.label': 'LLL:EXT:backend/Resources/Private/Language/locallang_layout.xlf:editPageTitle.input.field.label',
            'editablePageTitle.button.edit.label': 'LLL:EXT:backend/Resources/Private/Language/locallang_layout.xlf:editPageTitle',
            'editablePageTitle.button.save.label': 'LLL:EXT:core/Resources/Private/Language/locallang_common.xlf:save',
            'editablePageTitle.button.cancel.label': 'LLL:EXT:core/Resources/Private/Language/locallang_common.xlf:cancel'
        }"
    />
    <f:variable name="immediateActionArgs" value="{0: 'web', 1: pageId}" />
    <typo3-immediate-action
            action="TYPO3.Backend.Storage.ModuleStateStorage.update"
            args="{immediateActionArgs -> f:format.json() -> f:format.htmlspecialchars()}"
    ></typo3-immediate-action>
</f:section>

<f:section name="Content">

    <h1>{tableTitle}</h1>

    <f:for as="siteTabs" key="siteIdentifier" each="{tabs}">
        <f:if condition="{tabs -> f:count()} > 1">
            <h2>Site: {siteIdentifier}</h2>
        </f:if>
        <f:if condition="{tabs -> f:count()} > 1 || {siteTabs -> f:count()} > 1">
            <f:for each="{siteTabs}" as="tab">
                <div class="tab mb-3">
                    <a class="btn btn-primary{f:if(condition: tab.active, then: ' active')}" href="{tab.url}">
                        {tab.title}
                    </a>
                    <f:variable name="rootLine" value="" />
                    <f:for as="page" each="{tab.rootLine}" iteration="i">
                        <f:if condition="{page.title}">
                            <f:if condition="{i.isFirst}">
                                <f:then><f:variable name="rootLine" value="{page.title}" /></f:then>
                                <f:else>
                                    <f:variable name="rootLine" value="{rootLine} -> {page.title}" />
                                </f:else>
                            </f:if>
                        </f:if>
                    </f:for>
                    <button class="btn" data-bs-toggle="popover" data-bs-content="Rootline: {rootLine}">
                        <core:icon identifier="actions-info-circle" />
                    </button>
                </div>
            </f:for>
        </f:if>
    </f:for>
    <typo3-backend-editable-page-title
            pageTitle="{pageTitle}"
            pageId="{pageId}"
    >
    {pageTitle}
    </typo3-backend-editable-page-title>
    <f:format.raw>{additionalContentTop}</f:format.raw>
    <f:format.raw>{languageSelectorHtml}</f:format.raw>
    <f:format.raw>{searchBoxHtml}</f:format.raw>


    <f:format.raw>{tableListHtml}</f:format.raw>
    <f:format.raw>{clipboardHtml}</f:format.raw>
    <f:format.raw>{additionalContentBottom}</f:format.raw>
</f:section>

</html>
